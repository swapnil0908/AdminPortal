{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/swapnil0908/Downloads/AdminPortal/node_modules/@babel/runtime/helpers/classCallCheck\").default;\n\nvar _createClass = require(\"/Users/swapnil0908/Downloads/AdminPortal/node_modules/@babel/runtime/helpers/createClass\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar options_1 = require(\"./options\");\n/**\n * A program has a command, a description, options, and a run method\n */\n\n\nvar Program = /*#__PURE__*/function () {\n  function Program() {\n    _classCallCheck(this, Program);\n\n    this.options = {};\n  }\n  /**\n   * Register a command and the description.\n   * @param cmd The command.\n   * @param cmdDescription The description of the command.\n   * @returns The program for method chaining.\n   */\n\n\n  _createClass(Program, [{\n    key: \"command\",\n    value: function command(cmd, cmdDescription) {\n      this.cmd = cmd;\n      this.cmdDescription = cmdDescription;\n      return this;\n    }\n    /**\n     * Register a new option.\n     * @param opt The option.\n     * @param description The description of the option.\n     * @param type The type of value expected: boolean, number, or string\n     * @param defaultValue The option's default value.\n     * @returns The program for method chaining.\n     */\n\n  }, {\n    key: \"option\",\n    value: function option(opt, description, type, opt_defaultValue) {\n      this.options[opt] = new options_1.Option(opt, description, type, opt_defaultValue);\n      return this;\n    }\n    /**\n     * Adds an option to the program.\n     * @param option The option.\n     * @returns The program for method chaining.\n     */\n\n  }, {\n    key: \"addOption\",\n    value: function addOption(option) {\n      this.options[option.opt] = option;\n      return this;\n    }\n    /**\n     * Registers a method that will be used to run the program.\n     * @param runMethod The method that will be used to run the program.\n     * @returns The program for method chaining.\n     */\n\n  }, {\n    key: \"action\",\n    value: function action(runMethod) {\n      this.runMethod = runMethod;\n      return this;\n    }\n    /**\n     * Adds the value to the options and passes the updated options to the run\n     * method.\n     * @param args The arguments that will be parsed to run the method.\n     */\n\n  }, {\n    key: \"run\",\n    value: function run(json) {\n      for (var opt in this.options) {\n        this.options[opt].value = this.getValue_(opt, json);\n      }\n\n      return Promise.resolve(this.runMethod(this.options));\n    }\n  }, {\n    key: \"getValue_\",\n    value: function getValue_(key, json) {\n      var keyList = key.split('.');\n      var tempJson = json;\n\n      while (keyList.length > 0) {\n        var keyItem = keyList[0];\n\n        if (tempJson[keyItem] != null) {\n          tempJson = tempJson[keyItem];\n          keyList = keyList.slice(1);\n        } else {\n          return undefined;\n        }\n      }\n\n      return tempJson;\n    }\n    /**\n     * Prints the command with the description. The description will have spaces\n     * between the cmd so that the starting position is \"posDescription\". If the\n     * gap between the cmd and the description is less than MIN_SPACING or\n     * posDescription is undefined, the spacing will be MIN_SPACING.\n     *\n     * @param opt_postDescription Starting position of the description.\n     */\n\n  }, {\n    key: \"printCmd\",\n    value: function printCmd(opt_posDescription) {\n      var log = '  ' + this.cmd;\n      var spacing = Program.MIN_SPACING;\n\n      if (opt_posDescription) {\n        var diff = opt_posDescription - log.length;\n\n        if (diff < Program.MIN_SPACING) {\n          spacing = Program.MIN_SPACING;\n        } else {\n          spacing = diff;\n        }\n      }\n\n      log += Array(spacing).join(' ') + this.cmdDescription;\n      console.log(log);\n    }\n    /**\n     * Prints the options with the option descriptions and default values.\n     * The posDescription and posDefault is the starting position for the option\n     * description. If extOptions are provided, check to see if we have already\n     * printed those options. Also, once we print the option, add them to the extOptions.\n     *\n     * @param posDescription Position to start logging the description.\n     * @param posDefault Position to start logging the default value.\n     * @param opt_extOptions A collection of options that will be updated.\n     */\n\n  }, {\n    key: \"printOptions\",\n    value: function printOptions(posDescription, posDefault, opt_extOptions) {\n      for (var opt in this.options) {\n        // we have already logged it\n        if (opt_extOptions && opt_extOptions[opt]) {\n          continue;\n        }\n\n        var option = this.options[opt];\n        var log = '  --' + option.opt;\n        var spacing = Program.MIN_SPACING; // description\n\n        var diff = posDescription - log.length;\n\n        if (diff < Program.MIN_SPACING) {\n          spacing = Program.MIN_SPACING;\n        } else {\n          spacing = diff;\n        }\n\n        log += Array(spacing).join(' ') + option.description; // default value\n\n        if (option.defaultValue) {\n          spacing = Program.MIN_SPACING;\n\n          var _diff = posDefault - log.length - 1;\n\n          if (_diff <= Program.MIN_SPACING) {\n            spacing = Program.MIN_SPACING;\n          } else {\n            spacing = _diff;\n          }\n\n          log += Array(spacing).join(' ');\n          log += '[default: ' + option.defaultValue + ']';\n        }\n\n        console.log(log);\n\n        if (opt_extOptions) {\n          opt_extOptions[option.opt] = option;\n        }\n      }\n    }\n    /**\n     * Assuming that the this program can run by itself, to print out the program's\n     * help. Also assuming that the commands are called cmd-run and cmd-help.\n     */\n\n  }, {\n    key: \"printHelp\",\n    value: function printHelp() {\n      console.log('\\n' + 'Usage:        ' + this.cmd + ' [options]\\n' + '              ' + this.cmd + ' help\\n' + 'Description:  ' + this.cmdDescription + '\\n');\n      console.log('Options:');\n      this.printOptions(this.posDescription(), this.posDefault());\n    }\n  }, {\n    key: \"posDescription\",\n    value: function posDescription() {\n      return this.lengthOf_('opt') + 2 * Program.MIN_SPACING;\n    }\n  }, {\n    key: \"posDefault\",\n    value: function posDefault() {\n      return this.posDescription() + this.lengthOf_('description') + Program.MIN_SPACING;\n    }\n  }, {\n    key: \"lengthOf_\",\n    value: function lengthOf_(param) {\n      var maxLength = -1;\n\n      for (var opt in this.options) {\n        var option = this.options[opt];\n\n        if (param === 'description') {\n          maxLength = Math.max(maxLength, option.description.length);\n        } else if (param === 'opt') {\n          maxLength = Math.max(maxLength, option.opt.length);\n        }\n      }\n\n      return maxLength;\n    }\n    /**\n     * Create a collection of options used by this program.\n     * @returns The options used in the programs.\n     */\n\n  }, {\n    key: \"getOptions_\",\n    value: function getOptions_(allOptions) {\n      for (var opt in this.options) {\n        allOptions[opt] = this.options[opt];\n      }\n\n      return allOptions;\n    }\n    /**\n     * Get the options used by the program and create the minimist options\n     * to ensure that minimist parses the values properly.\n     * @returns The options for minimist.\n     */\n\n  }, {\n    key: \"getMinimistOptions\",\n    value: function getMinimistOptions() {\n      var allOptions = {};\n      allOptions = this.getOptions_(allOptions);\n      var minimistOptions = {};\n      var minimistBoolean = [];\n      var minimistString = [];\n      var minimistNumber = [];\n      var minimistDefault = {};\n\n      for (var opt in allOptions) {\n        var option = allOptions[opt];\n\n        if (option.type === 'boolean') {\n          minimistBoolean.push(option.opt);\n        } else if (option.type === 'string') {\n          minimistString.push(option.opt);\n        } else if (option.type === 'number') {\n          minimistNumber.push(option.opt);\n        }\n\n        if (typeof option.defaultValue !== 'undefined') {\n          minimistDefault[option.opt] = option.defaultValue;\n        }\n      }\n\n      minimistOptions['boolean'] = minimistBoolean;\n      minimistOptions['string'] = minimistString;\n      minimistOptions['number'] = minimistNumber;\n      minimistOptions['default'] = minimistDefault;\n      return minimistOptions;\n    }\n  }]);\n\n  return Program;\n}();\n\nProgram.MIN_SPACING = 4;\nexports.Program = Program; //# sourceMappingURL=programs.js.map","map":null,"metadata":{},"sourceType":"script"}